# 整体设计

* Unity2D
* 主角和NPC们作为spirit，有不同的走路图片构成animation
* 场景做成静态的，每个小地图作为一个场景，大地图也作为一个场景
* 主角和NPC们身上挂C#脚本，各自有各自的类
* 大地图上有各个可点击的小地图缩略图，点击后切换至小地图。小地图也可切回大地图，各自挂脚本准备切场景吧

## 主角类

数据成员

* 主角在世界地图的坐标
* 主角在当前小地图的坐标

函数成员

* 移动函数，接受WASD
* 主角被点击时弹出简单信息？
* 切换小地图-大地图的事件信号？
* 使用技能

## NPC类

所有NPC的父类

数据成员

* 名称
* 简介信息
* 小图标
* 主角已访问NPC的次数 + 被探索的进度？

函数成员

+ 显示信息（鼠标悬停）

* NPC被点击时的事件处理，弹出对话框，提供点击任意处继续之类的
  * 进入NPC的考验，切换场景到NPC的游戏

## 小怪类

所有小怪的父类

数据成员

* 名称
* 简介信息
* 小图标
* 携带buff
* 血量
* 移动速度

函数成员

+ 显示信息（鼠标悬停）

* AI移动
* 出生
* 被消灭



## 时辰类

数据成员

* 剩余的时辰

函数成员

* 处理主角进入小地图时的信号，减去对应的时辰
* 每当剩余时辰改变时，检测是否小于0，该提示主角回到部落祭坛了



## 背包类

* 作为道具的容器，道具可以是一个结构体，包含名称，编号，图片
* 负责显示背包的小图标
* 打开背包后的界面

## 技能栏类

* buff，需要代入NPC的游戏之中
* 主角能用的技能？包括八卦

## 祭坛类/场景

* 和主角对话框
* 给出主角背包-祭坛4个槽，指示主角往里放
* 根据放入的东西决定结局
* 播放结局动画？



# 开发日志

## 1. 创建地图和人物

* 主角能点击地板走动
* 设置小地图的npc
* 点击npc有事件
* 跳对话框，有确定取消按钮

### 主角挂载Player.cs

按点击位置，确定targetPosition，逐渐移动过去

同时处理点地板，点Npc，点传送门的情况

### Npc1挂载Npc1.cs



### 对话框实现：

空物体MsgBox+UI

* 对话者头像
* 背景图
* text（拖进Npc1脚本，动态
* 继续按钮（OnClick的槽函数拖动实现
* 取消按钮（OnClick的槽函数拖动实现

点击npc时启动脚本中对应npc的对话框

对话框专门一个脚本，就是Npc的脚本

玩家切进小地图时，需要加载npc，加载对话框，加载主角，加载小怪

专门有个类负责切场景和加载xxx，切入时？

### 切场景实现

切场景时，编辑器中的物体会常驻内存嘛？如果会，如何引用他们？动态创建的物体会常驻内存嘛？如果会，如何引用他们？每个场景有一个管理类？专门给各个脚本发信号？

怎么把主角作为单例，行走于各个场景之间呢。。

dontdestroy，然后进入场景后让传送门设置主角位置？



loadscene时，旧的场景中的物体会被销毁？

每个传送门身上挂了脚本，id需要手动在编辑器内指定，主角走到传送门处后，根据id选择传送的场景，切换

id：

大地图 0

主角部落 1

祭坛 2

火焰山等8个地图 345678910

### 时辰和UI实现

作为单例，存放在MainMap中，然后dont destroy

这样得保证各个界面大小一样，就是相机的大小

## 2. 接下来的计划

* 切场景
* 加时辰，显示UI
* 更多子地图
* 背包
* 技能栏、状态栏
* 小怪
* 时辰用尽返回祭坛，解锁结局
* 开启多周目
* 欢迎界面，开局漫画